<div style="max-width: 1000px; margin: auto" class="my-24">
  <div class="flex w-full flex-row gap-3" cdkDropListGroup>
    @for (column of columns(); track column.id) {

    <app-kanban-column
      class="flex-1 bg-gray-100 relative kanban-column border-round-lg"
      cdkDropList
      [cdkDropListData]="column"
      (cdkDropListDropped)="drop($event)"
      [cdkDropListEnterPredicate]="evenPredicate"
    >
      <h2
        class="text-xs sticky top-0 my-3 px-2 text-gray-600 font-bold uppercase white-space-nowrap"
      >
        {{ column.title }}
      </h2>

      <div class="relative p-2 flex flex-column flex-1">
        @if(dragging() && !column.canDrag && !column.isDragging ){
        <div
          style="max-height: 100dvh; min-height: 100dvh"
          class="bg-gray-100 absolute sticky pointer-events-none flex border-round-lg p-3 z-5 justify-content-start align-items-start left-0 right-0 top-0 bottom-0"
        >
          <div
            class="flex mt-3 text-gray-700 flex-column gap-2 align-items-center"
          >
            <i class="pi pi-ban"></i>
            <p class="text-center m-0">
              Você não pode mover esse item para essa coluna devido ás
              configurações ou permissões do fluxo de trabalho
            </p>
          </div>
        </div>
        }@else if(dragging() && column.canDrag && !column.isDragging){
        <div
          style="max-height: 100dvh; min-height: 100dvh"
          class="absolute sticky pointer-events-none flex border-round-lg p-3 z-5 border-1 border-blue-400 justify-content-center align-items-center bg-blue-100 left-0 right-0 top-0 bottom-0"
        >
          <p class="text-center uppercase text-blue-700 font-semibold">
            {{ column.title }}
          </p>
        </div>
        } @for (ticket of column.tickets; track ticket.id) {

        <app-kanban-item
          cdkDrag
          [cdkDragData]="ticket"
          (cdkDragStarted)="onDragStart($event)"
          (cdkDragEnded)="onDragEnd($event)"
          cdkDragPreviewContainer="parent"
          [item]="ticket"
          class="mb-1 kanban-item"
        />

        }
      </div>
    </app-kanban-column>
    }
  </div>
</div>
